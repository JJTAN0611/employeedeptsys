<%@page import="java.util.List"%>
<%@page import="model.entity.Department"%>
<%@page import="model.usebean.DepartmentUseBean"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<%
	DepartmentUseBean dubtemp = (DepartmentUseBean) session.getAttribute("dub");
%>
<jsp:useBean id="dub" type="model.usebean.DepartmentUseBean"
	scope="session" />
<%@ include file="header.jsp"%>
<div class="container top-first">
	<h1>
		<div class="badge bg-warning text-dark text-wrap large col-12">
			<div class="row">
				<div class="text-start col" style="font-size: 35px;">
					Department Record
					<div class="badge bg-light text-success text-wrap">Add</div>
				</div>
			</div>
		</div>
	</h1>

	<br> <br>
	<h1>
		<center>Please fill in the following details.</center>
	</h1>
	<hr>
	<div class="text-danger"><%=dubtemp.getErrorMsg("unknown")%></div>
	<br> <br>
</div>

<div class="container wow bounceIn" data-wow-duration="1s"
	data-wow-delay="0.2s">
	<form method="post" action="MainServlet">
		<input type="hidden" name="target" value="department" />
		<div class="form-group row">
			<label class="control-label col-3 text-end">Department ID:</label>
			<div class="col-8">
				<div class="input-group">
					<input id="dept_id" type="text" class="form-control"
						placeholder="ID will be autogenerated." name="id"
						value="<%=dubtemp.getId()%>"
						onclick="$('.text-danger').hide(true)">

					<div class="input-group-append">
						<button id="autoid" class="btn btn-primary" type="button"
							onclick="
								$('#autoid').attr('class', 'btn btn-primary spinner-border');
						  		$.get('MainServlet?target=department&action=getAutoId', function(data, status){
						  			$('#autoid').attr('class', 'btn btn-primary');
							  		var aid = $.parseJSON(data);
							  		alert('The generated ID is [' + aid.autoId +'] which may not applicable during submit. (Use by sitmoutaneous user)');
							  		$('#dept_id').val(aid.autoId);});
						">Auto
							ID</button>
					</div>
				</div>
				<div class="text-danger"><%=dubtemp.getErrorMsg("id")%></div>
			</div>

		</div>
		<br>
		<div class="form-group row">
			<label class="control-label col-3 text-end">Department name:</label>
			<div class="col-8">
				<input type="text" class="form-control" placeholder="Enter name"
					name="dept_name" value='<%=dubtemp.getDept_name()%>'>
				<div class="text-danger"><%=dubtemp.getErrorMsg("dept_name")%></div>
			</div>
		</div>
		<br>
		<div class="form-group row">
			<label class="control-label col-3 text-end"></label>
			<div class="col-8">
				<input type="submit" class="btn btn-success" name="action"
					value="add">
			</div>
		</div>
	</form>
</div>
<%
	session.invalidate();
%>
<%@ include file="footer.jsp"%>
